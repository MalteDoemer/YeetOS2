ifdef USE_CLANG
AS = nasm -f elf32
CC = clang-10 -target i686-elf
CXX = clang++-10 -target i686-elf
LD = clang++-10 -target i686-elf
AR = i686-elf-ar

CXX_FLAGS := -flto=thin $(CXX_FLAGS)
LD_FLAGS := -flto=thin -fuse-ld=lld $(LD_FLAGS)

else 
AS = nasm -f elf32
CC = i686-elf-gcc
CXX = i686-elf-g++
LD = i686-elf-ld
AR = i686-elf-ar

CXX_FLAGS := -fno-leading-underscore -fconcepts-diagnostics-depth=2 $(CXX_FLAGS)

endif

C_FLAGS := \
-Wall \
-ffreestanding \
-nostdlib \
-std=c99 \
$(C_FLAGS)

CXX_FLAGS := \
-Wall \
-ffreestanding \
-nostdlib \
-std=c++20 \
-fno-exceptions \
$(CXX_FLAGS)


#-mregparm=3 \

LD_FLAGS := $(LD_FLAGS)
AS_FLAGS := $(AS_FLAGS)


ifdef DEBUG
C_FLAGS := -ggdb $(C_FLAGS)
CXX_FLAGS := -ggdb $(CXX_FLAGS)
else 
C_FLAGS := -O2 $(C_FLAGS)
CXX_FLAGS := -O2 $(CXX_FLAGS)
endif
